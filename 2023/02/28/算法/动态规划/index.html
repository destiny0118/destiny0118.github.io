<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.lug.ustc.edu.cn/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"destiny0118.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一维DP、二维DP、空间压缩、背包DP、区间DP、数位DP。适合求解具有最优子结构的问题，并且子问题的最值可以得到。">
<meta property="og:type" content="article">
<meta property="og:title" content="动态规划">
<meta property="og:url" content="https://destiny0118.github.io/2023/02/28/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/index.html">
<meta property="og:site_name" content="我的个人博客">
<meta property="og:description" content="一维DP、二维DP、空间压缩、背包DP、区间DP、数位DP。适合求解具有最优子结构的问题，并且子问题的最值可以得到。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202309121141193.png">
<meta property="og:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202304122327709.png">
<meta property="og:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202304122333011.png">
<meta property="og:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202306071723806.png">
<meta property="og:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202306072019253.png">
<meta property="og:image" content="https://gitee.com/destiny0118/picgo/raw/master/pic/image-20210409201244924.png">
<meta property="article:published_time" content="2023-02-27T16:00:00.000Z">
<meta property="article:modified_time" content="2024-09-29T06:53:57.516Z">
<meta property="article:author" content="Destiny">
<meta property="article:tag" content="动态规划">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202309121141193.png">


<link rel="canonical" href="https://destiny0118.github.io/2023/02/28/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://destiny0118.github.io/2023/02/28/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","path":"2023/02/28/算法/动态规划/","title":"动态规划"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>动态规划 | 我的个人博客</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">我的个人博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">What past is prolgue.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-project"><a href="/categories/project/" rel="section"><i class="fa fa-tasks fa-fw"></i>项目</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">1 动态规划DP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">2 空间压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%8F%AA%E4%B8%8E%E6%9C%89%E9%99%90%E4%B8%AA%E5%8F%98%E9%87%8F%E7%9B%B8%E5%85%B3"><span class="nav-text">2.1 只与有限个变量相关</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-1-1-91-%E8%A7%A3%E7%A0%81%E6%96%B9%E6%B3%95"><span class="nav-text">2.1.1.1 91. 解码方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E4%BA%8C%E7%BB%B4%E5%8E%8B%E7%BC%A9%E5%88%B0%E4%B8%80%E7%BB%B4"><span class="nav-text">2.2 二维压缩到一维</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-1-64-%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C"><span class="nav-text">2.2.1.1 64. 最小路径和</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E6%BB%9A%E5%8A%A8%E6%95%B0%E7%BB%84"><span class="nav-text">2.3 滚动数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-1-221-%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2"><span class="nav-text">2.3.1.1 221. 最大正方形</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">3 二维DP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">4 背包DP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-0-1%E8%83%8C%E5%8C%85"><span class="nav-text">4.1 0-1背包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85"><span class="nav-text">4.2 完全背包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1-1-474-%E4%B8%80%E5%92%8C%E9%9B%B6"><span class="nav-text">4.2.1.1 474. 一和零</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#879-%E7%9B%88%E5%88%A9%E8%AE%A1%E5%88%92"><span class="nav-text">879. 盈利计划</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1049-%E6%9C%80%E5%90%8E%E4%B8%80%E5%9D%97%E7%9F%B3%E5%A4%B4%E7%9A%84%E9%87%8D%E9%87%8F-II"><span class="nav-text">1049. 最后一块石头的重量 II</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">5 字符串编辑</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1-1-10-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="nav-text">5.1.1.1 10. 正则表达式匹配</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">6 区间DP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E5%AE%9A%E4%B9%89"><span class="nav-text">6.1 定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-%E6%80%A7%E8%B4%A8"><span class="nav-text">6.2 性质</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">7 数位DP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-1-%E9%A2%98%E7%9B%AE"><span class="nav-text">7.1.1 题目</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1-1-6957-%E7%BB%9F%E8%AE%A1%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E6%AD%A5%E8%BF%9B%E6%95%B0%E5%AD%97%E6%95%B0%E7%9B%AE"><span class="nav-text">7.1.1.1 6957. 统计范围内的步进数字数目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1-2-2719-%E7%BB%9F%E8%AE%A1%E6%95%B4%E6%95%B0%E6%95%B0%E7%9B%AE"><span class="nav-text">7.1.1.2 2719. 统计整数数目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1-3-600-%E4%B8%8D%E5%90%AB%E8%BF%9E%E7%BB%AD1%E7%9A%84%E9%9D%9E%E8%B4%9F%E6%95%B4%E6%95%B0"><span class="nav-text">7.1.1.3 600. 不含连续1的非负整数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-1-3-1-%E6%96%B9%E6%B3%95%E4%B8%80"><span class="nav-text">7.1.1.3.1 方法一</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-1-3-2-%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="nav-text">7.1.1.3.2 方法二</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-1-4-233-%E6%95%B0%E5%AD%97-1-%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="nav-text">7.1.1.4 233. 数字 1 的个数</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">8 dp[i]表示从头到下标i的某一性质</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-1-1-%E5%89%91%E6%8C%87-Offer-46-%E6%8A%8A%E6%95%B0%E5%AD%97%E7%BF%BB%E8%AF%91%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">8.1.1.1 剑指 Offer 46. 把数字翻译成字符串</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">9 子序列</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-1-1-1-300-%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97"><span class="nav-text">9.1.1.1 300. 最长递增子序列</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#9-1-1-1-1-DP"><span class="nav-text">9.1.1.1.1 DP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-1-1-1-2-%E8%B4%AA%E5%BF%83-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE"><span class="nav-text">9.1.1.1.2 贪心+二分查找</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-1-1-2-376-%E6%91%86%E5%8A%A8%E5%BA%8F%E5%88%97"><span class="nav-text">9.1.1.2 376. 摆动序列</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-%E6%9C%80%E5%A4%A7%E5%AD%90%E6%AE%B5%E5%92%8C"><span class="nav-text">9.2 最大子段和</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-%E6%9C%80%E5%A4%A7%E5%AD%90%E7%9F%A9%E9%98%B5%E5%92%8C"><span class="nav-text">9.3 最大子矩阵和</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">10 分割类DP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-1-1-139-%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86"><span class="nav-text">10.1.1.1 139. 单词拆分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-1-2-140-%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86-II"><span class="nav-text">10.1.1.2 140. 单词拆分 II</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-1-3-279-%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0"><span class="nav-text">10.1.1.3 279. 完全平方数</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">11 股票交易类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-1-1-123-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA-III"><span class="nav-text">11.1.1.1 123. 买卖股票的最佳时机 III</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-1-2-188-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA-IV"><span class="nav-text">11.1.1.2 188. 买卖股票的最佳时机 IV</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-1-3-309-%E6%9C%80%E4%BD%B3%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E6%97%B6%E6%9C%BA%E5%90%AB%E5%86%B7%E5%86%BB%E6%9C%9F"><span class="nav-text">11.1.1.3 309. 最佳买卖股票时机含冷冻期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-1-1-4-714-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA%E5%90%AB%E6%89%8B%E7%BB%AD%E8%B4%B9"><span class="nav-text">11.1.1.4 714. 买卖股票的最佳时机含手续费</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">12 奇偶DP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#12-1-1-1-2786-%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE%E4%BD%BF%E5%88%86%E6%95%B0%E6%9C%80%E5%A4%A7"><span class="nav-text">12.1.1.1 2786. 访问数组中的位置使分数最大</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">13 题目</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Destiny</p>
  <div class="site-description" itemprop="description">凡是过去，皆为序章。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">128</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/destiny0118" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;destiny0118" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yuyg163@163.com" title="E-Mail → mailto:yuyg163@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/19273732/destiny" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;19273732&#x2F;destiny" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://destiny0118.github.io/2023/02/28/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Destiny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的个人博客">
      <meta itemprop="description" content="凡是过去，皆为序章。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="动态规划 | 我的个人博客">
      <meta itemprop="description" content="一维DP、二维DP、空间压缩、背包DP、区间DP、数位DP。适合求解具有最优子结构的问题，并且子问题的最值可以得到。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          动态规划<a href="https://github.com/destiny0118/Hexo/edit/master/Destiny/source/_posts/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-02-28 00:00:00" itemprop="dateCreated datePublished" datetime="2023-02-28T00:00:00+08:00">2023-02-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/algorithm/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">一维DP、二维DP、空间压缩、背包DP、区间DP、数位DP。适合求解具有最优子结构的问题，并且子问题的最值可以得到。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><img src="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202309121141193.png" alt="image-20230912114114042"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">comb</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">if</span> a*b==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> a+b</span><br><span class="line">    <span class="keyword">elif</span> a%<span class="number">10</span>==b%<span class="number">10</span>:</span><br><span class="line">        <span class="keyword">return</span> comb(a//<span class="number">10</span>,b//<span class="number">10</span>)*<span class="number">10</span>+a%<span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(comb(a//<span class="number">10</span>,b)*<span class="number">10</span>+a%<span class="number">10</span>,comb(a,b//<span class="number">10</span>)*<span class="number">10</span>+b%<span class="number">10</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>1 动态规划DP</h1>
<p>边界条件+转移方程</p>
<p><a href="https://oi-wiki.org/dp/interval/">DP - OI Wiki (oi-wiki.org)</a></p>
<h1>2 空间压缩</h1>
<h2 id="2-1-只与有限个变量相关">2.1 只与有限个变量相关</h2>
<h4 id="2-1-1-1-91-解码方法">2.1.1.1 <a href="https://leetcode.cn/problems/decode-ways/">91. 解码方法</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">numDecodings</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">// 当前位置不为0，可选择一个数字映射到字母</span></span><br><span class="line">            <span class="keyword">if</span>(s[i]!=<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">                dp[i<span class="number">+1</span>]=dp[i];</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 选两个位置数字映射</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="type">int</span> val=(s[i<span class="number">-1</span>]-<span class="string">&#x27;0&#x27;</span>)*<span class="number">10</span>+s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span>(val&lt;=<span class="number">26</span>&amp;&amp;val&gt;=<span class="number">10</span>)</span><br><span class="line">                    dp[i<span class="number">+1</span>]+=dp[i<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>空间优化</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">numDecodings</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> a=<span class="number">0</span>,b=<span class="number">1</span>,c;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            c=<span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 当前位置不为0，可选择一个数字映射到字母</span></span><br><span class="line">            <span class="keyword">if</span>(s[i]!=<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">                c=b;;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 选两个位置数字映射</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="type">int</span> val=(s[i<span class="number">-1</span>]-<span class="string">&#x27;0&#x27;</span>)*<span class="number">10</span>+s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span>(val&lt;=<span class="number">26</span>&amp;&amp;val&gt;=<span class="number">10</span>)</span><br><span class="line">                    c+=a;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">tie</span>(a,b)=&#123;b,c&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-二维压缩到一维">2.2 二维压缩到一维</h2>
<h4 id="2-2-1-1-64-最小路径和">2.2.1.1 <a href="https://leetcode.cn/problems/minimum-path-sum/">64. 最小路径和</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minPathSum</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=grid.<span class="built_in">size</span>(),n=grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>]=grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">            dp[<span class="number">0</span>][i]=dp[<span class="number">0</span>][i<span class="number">-1</span>]+grid[<span class="number">0</span>][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;m;i++)</span><br><span class="line">            dp[i][<span class="number">0</span>]=dp[i<span class="number">-1</span>][<span class="number">0</span>]+grid[i][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">                dp[i][j]=<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>])+grid[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>dp[i][j]=min(dp[i-1][j],dp[i][j-1])+grid[i][j]</code>只与两个数有关，可以压缩到一维。对于第i行，在求第j列时，前j-1列已经更新，dp[j-1]代表dp[i][j-1]；dp[j]待更新，当前存储dp[i-1][j]。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minPathSum</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;grid)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = grid.<span class="built_in">size</span>(), n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n)</span></span>;</span><br><span class="line">        dp[<span class="number">0</span>]=grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">            dp[j]=dp[j<span class="number">-1</span>]+grid[<span class="number">0</span>][j];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">            dp[<span class="number">0</span>]+=grid[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">                dp[j]=<span class="built_in">min</span>(dp[j],dp[j<span class="number">-1</span>])+grid[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="2-3-滚动数组">2.3 滚动数组</h2>
<h4 id="2-3-1-1-221-最大正方形">2.3.1.1 <a href="https://leetcode.cn/problems/maximal-square/">221. 最大正方形</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maximalSquare</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=matrix.<span class="built_in">size</span>(),n=matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>));</span><br><span class="line">        <span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(matrix[i<span class="number">-1</span>][j<span class="number">-1</span>]==<span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                    <span class="type">int</span> edge=<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j<span class="number">-1</span>],<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]));</span><br><span class="line">                    dp[i][j]=edge<span class="number">+1</span>;</span><br><span class="line">                    ret=<span class="built_in">max</span>(ret,edge<span class="number">+1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret*ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>滚动数组压缩，只需要保存两行的结果。在位置为0时需要修改相应值，否则记录的是前面两行对应列位置的值。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maximalSquare</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=matrix.<span class="built_in">size</span>(),n=matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>));</span><br><span class="line">        <span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="type">int</span> idx=i%<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(matrix[i<span class="number">-1</span>][j<span class="number">-1</span>]==<span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                    <span class="type">int</span> edge=<span class="built_in">min</span>(dp[<span class="number">1</span>-idx][j<span class="number">-1</span>],<span class="built_in">min</span>(dp[<span class="number">1</span>-idx][j],dp[idx][j<span class="number">-1</span>]));</span><br><span class="line">                    dp[idx][j]=edge<span class="number">+1</span>;</span><br><span class="line">                    ret=<span class="built_in">max</span>(ret,edge<span class="number">+1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//关键</span></span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[idx][j]=<span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret*ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1>3 二维DP</h1>
<p><a href="https://leetcode-cn.com/problems/edit-distance/">72. 编辑距离</a>（<mark>583题的动态规划的变体</mark>）</p>
<blockquote>
<p>给你两个单词 word1 和 word2， 请返回将 word1 转换成 word2 所使用的最少操作数  。</p>
<p>你可以对一个单词进行如下三种操作：</p>
<p>插入一个字符、删除一个字符、替换一个字符</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=word<span class="number">1.</span><span class="built_in">size</span>(),n=word<span class="number">2.</span><span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>,<span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">            dp[i][<span class="number">0</span>]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            dp[<span class="number">0</span>][j]=j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(word1[i<span class="number">-1</span>]==word2[j<span class="number">-1</span>])</span><br><span class="line">                    dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="comment">// word1删除一个字符 word2删除一个字符 替换一个字符</span></span><br><span class="line">                    dp[i][j]=<span class="built_in">min</span>( <span class="built_in">min</span>(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]),dp[i<span class="number">-1</span>][j<span class="number">-1</span>])<span class="number">+1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1>4 背包DP</h1>
<blockquote>
<p>背包问题是一种组合优化的 NP 完全问题：有 N 个物品和容量为 W 的背包，每个物品都有自己的体积 w 和价值 v，求拿哪些物品可以使得背包所装下物品的总价值最大。如果限定每种物品只能选择 0 个或 1 个，则问题称为 0-1 背包问题；如果不限定每种物品的数量，则问题称为无 界背包问题或完全背包问题。</p>
</blockquote>
<h2 id="4-1-0-1背包">4.1 0-1背包</h2>
<p>$$<br>
前i件物品体积不超过j的情况下能达到的最大价值\<br>
dp[i][j]=max(dp[i-1][j],dp[i-1][j-w_i])+v_i\<br>
时间复杂度：O(NM)\<br>
空间复杂度：O(NM)<br>
$$</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//N个物品，体积最大为W</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxValue</span><span class="params">(vector&lt;<span class="type">int</span>&gt; weights,vector&lt;<span class="type">int</span>&gt; values,<span class="type">int</span> N,<span class="type">int</span> W)</span></span>&#123;</span><br><span class="line"> 	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(N<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(W<span class="number">+1</span>,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="type">int</span> w=weights[i<span class="number">-1</span>],v=values[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=W;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=w)&#123;</span><br><span class="line">                dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j-w]+v);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=dp[i<span class="number">-1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[N][W];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>空间优化：</p>
<p><img src="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202304122327709.png" alt="image-20230412232726661"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxValue</span><span class="params">(vector&lt;<span class="type">int</span>&gt; weights,vector&lt;<span class="type">int</span>&gt; values,<span class="type">int</span> N,<span class="type">int</span> W)</span></span>&#123;</span><br><span class="line"> 	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(N<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(W<span class="number">+1</span>,<span class="number">0</span>));</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(W<span class="number">+1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="type">int</span> w=weights[i<span class="number">-1</span>],v=values[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=W;j&gt;=w;j--)&#123;</span><br><span class="line">           dp[j]=<span class="built_in">max</span>(dp[j],dp[j-w]+v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[W];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-完全背包">4.2 完全背包</h2>
<p>假设物品$i=2,w=2,v=3$，<br>
$$<br>
\begin{aligned}<br>
dp[2][5]=max(dp[1][5],dp[1][3]+3,dp[1][1]+6)\<br>
dp[2][3]=max(dp[1][3],dp[1][1]+3)\<br>
\Longrightarrow dp[2][5]=max(dp[1][5],dp[2][3]+3)\<br>
完全背包：dp[i][j]=max(dp[i-1][j],dp[i][j-w]+v)\<br>
0-1背包：dp[i][j]=max(dp[i-1][j],dp[i-1][j-w]+v)<br>
\end{aligned}<br>
$$<br>
<img src="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202304122333011.png" alt="image-20230412233307972"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//N个物品，体积最大为W</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxValue</span><span class="params">(vector&lt;<span class="type">int</span>&gt; weights,vector&lt;<span class="type">int</span>&gt; values,<span class="type">int</span> N,<span class="type">int</span> W)</span></span>&#123;</span><br><span class="line"> 	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(N<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(W<span class="number">+1</span>,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="type">int</span> w=weights[i<span class="number">-1</span>],v=values[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=W;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=w)&#123;</span><br><span class="line">                dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i][j-w]+v);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=dp[i<span class="number">-1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[N][W];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//空间优化</span></span><br><span class="line"><span class="comment">//N个物品，体积最大为W</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxValue</span><span class="params">(vector&lt;<span class="type">int</span>&gt; weights,vector&lt;<span class="type">int</span>&gt; values,<span class="type">int</span> N,<span class="type">int</span> W)</span></span>&#123;</span><br><span class="line"> 	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(W<span class="number">+1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="type">int</span> weight=weights[i<span class="number">-1</span>],v=values[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=weight;j&lt;=W;j++)&#123;</span><br><span class="line">           dp[j]=<span class="built_in">max</span>(dp[j],dp[j-weight]+v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[W];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-2-1-1-474-一和零">4.2.1.1 <a href="https://leetcode.cn/problems/ones-and-zeroes/">474. 一和零</a></h4>
<p>$$<br>
dp[i][j][k]=max(dp[i-1][j][k],dp[i-1][j-zero][k-one])<br>
$$</p>
<blockquote>
<p>从三维压缩到二维，因此需要倒序遍历</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findMaxForm</span><span class="params">(vector&lt;string&gt;&amp; strs, <span class="type">int</span> m, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>,<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(string &amp;s:strs)&#123;</span><br><span class="line">            <span class="type">int</span> zero=<span class="number">0</span>,one=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">char</span> ch:s)&#123;</span><br><span class="line">                <span class="keyword">if</span>(ch==<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">                    one++;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    zero++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=m;i&gt;=zero;i--)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=n;j&gt;=one;j--)&#123;</span><br><span class="line">                   dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i-zero][j-one]<span class="number">+1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><a href="https://leetcode.cn/problems/count-of-sub-multisets-with-bounded-sum/description/">2902. 和带限制的子多重集合的数目 - 力扣（LeetCode）</a></p>
<p>0-1背包：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox7" checked="true"><label for="checkbox7"></label><a href="https://leetcode.cn/problems/partition-equal-subset-sum/">416. 分割等和子集</a></p>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox8" checked="true"><label for="checkbox8"></label><a href="https://leetcode.cn/problems/ones-and-zeroes/">474. 一和零</a></p>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox9" checked="true"><label for="checkbox9"></label><a href="https://leetcode.cn/problems/target-sum/">494. 目标和</a>（回溯，DP）<br>
$$<br>
选取部分数字构成负数：\<br>
(sum-neg)-neg=target\<br>
neg=\frac{sum-target}{2}\<br>
\<br>
选取部分数字构成正数：\<br>
act-neg=target\<br>
act+neg=sum\<br>
act=\frac{sum+target}{2}<br>
$$</p>
</li>
<li class="lvl-2">
<p>[ ]</p>
</li>
<li class="lvl-2">
<h4 id="879-盈利计划"><a href="https://leetcode.cn/problems/profitable-schemes/">879. 盈利计划</a></h4>
</li>
<li class="lvl-2">
<h4 id="1049-最后一块石头的重量-II"><a href="https://leetcode.cn/problems/last-stone-weight-ii/">1049. 最后一块石头的重量 II</a></h4>
</li>
</ul>
<p>完全背包：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox10" checked="true"><label for="checkbox10"></label><a href="https://leetcode.cn/problems/coin-change/">322. 零钱兑换</a></p>
</li>
</ul>
<p><a href="https://leetcode.cn/problems/target-sum/solution/mu-biao-he-by-leetcode-solution-o0cp/">目标和 - 目标和 - 力扣（LeetCode）</a></p>
<h1>5 字符串编辑</h1>
<h4 id="5-1-1-1-10-正则表达式匹配">5.1.1.1 <a href="https://leetcode.cn/problems/regular-expression-matching/">10. 正则表达式匹配</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isMatch</span><span class="params">(string s, string p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = s.<span class="built_in">size</span>(), n = p.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">dp</span>(m + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(n + <span class="number">1</span>));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p[i - <span class="number">1</span>] == <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">                dp[<span class="number">0</span>][i] = dp[<span class="number">0</span>][i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p[j - <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p[j - <span class="number">1</span>] != <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] &amp;&amp; (s[i - <span class="number">1</span>] == p[j - <span class="number">1</span>]);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p[j - <span class="number">2</span>] != <span class="string">&#x27;.&#x27;</span> &amp;&amp; p[j - <span class="number">2</span>] != s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="comment">// 不用前面那个字符</span></span><br><span class="line">                    dp[i][j] = dp[i][j - <span class="number">2</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 用0次，再用一次，用一次(用一次的情况会被遍历到)</span></span><br><span class="line">                    dp[i][j] = dp[i][j - <span class="number">2</span>] || dp[i - <span class="number">1</span>][j] ;<span class="comment">//|| dp[i][j - 1];</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox11" checked="true"><label for="checkbox11"></label><a href="https://leetcode.cn/problems/longest-common-subsequence/">1143. 最长公共子序列</a></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=text<span class="number">1.</span><span class="built_in">size</span>(),n=text<span class="number">2.</span><span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(text1[i<span class="number">-1</span>]==text2[j<span class="number">-1</span>])&#123;</span><br><span class="line">                    dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>]<span class="number">+1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox12"><label for="checkbox12">#### </label><a href="https://leetcode.cn/problems/longest-uncommon-subsequence-ii/">522. 最长特殊序列 II</a></p>
<blockquote>
<p>双指针判断s1是否是s2的子序列</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findLUSlength</span><span class="params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> is_subseq = [](<span class="type">const</span> string&amp; s, <span class="type">const</span> string&amp; t) -&gt; <span class="type">bool</span> &#123;</span><br><span class="line">            <span class="type">int</span> pt_s = <span class="number">0</span>, <span class="type">pt_t</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (pt_s &lt; s.<span class="built_in">size</span>() &amp;&amp; <span class="type">pt_t</span> &lt; t.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[pt_s] == t[<span class="type">pt_t</span>]) &#123;</span><br><span class="line">                    ++pt_s;</span><br><span class="line">                &#125;</span><br><span class="line">                ++<span class="type">pt_t</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> pt_s == s.<span class="built_in">size</span>();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n = strs.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">bool</span> check = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i != j &amp;&amp; <span class="built_in">is_subseq</span>(strs[i], strs[j])) &#123;</span><br><span class="line">                    check = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (check) &#123;</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(strs[i].<span class="built_in">size</span>()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox13"><label for="checkbox13"></label><a href="https://leetcode.cn/problems/edit-distance/">72. 编辑距离</a></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=word<span class="number">1.</span><span class="built_in">size</span>(),n=word<span class="number">2.</span><span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>,INT_MAX/<span class="number">2</span>));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++) dp[<span class="number">0</span>][j]=j;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) dp[i][<span class="number">0</span>]=i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(word1[i<span class="number">-1</span>]==word2[j<span class="number">-1</span>])&#123;</span><br><span class="line">                    dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// 对word1插入一个字符，与word2[j]匹配</span></span><br><span class="line">                    <span class="comment">// 对word1删除一个字符，word1[i-1]与word2[j]匹配</span></span><br><span class="line">                    <span class="comment">// 替换一个字符</span></span><br><span class="line">                    dp[i][j]=<span class="built_in">min</span>(dp[i][j<span class="number">-1</span>],<span class="built_in">min</span>(dp[i<span class="number">-1</span>][j],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]))<span class="number">+1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>空间优化</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string word1, string word2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=word<span class="number">1.</span><span class="built_in">size</span>(),n=word<span class="number">2.</span><span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(<span class="number">2</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>,INT_MAX/<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=n;j++) dp[<span class="number">0</span>][j]=j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">            <span class="type">int</span> idx=i%<span class="number">2</span>;</span><br><span class="line">            dp[idx][<span class="number">0</span>]=i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(word1[i<span class="number">-1</span>]==word2[j<span class="number">-1</span>])&#123;</span><br><span class="line">                    dp[idx][j]=dp[<span class="number">1</span>-idx][j<span class="number">-1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">// 对word1插入一个字符，与word2[j]匹配</span></span><br><span class="line">                    <span class="comment">// 对word1删除一个字符，word1[i-1]与word2[j]匹配</span></span><br><span class="line">                    <span class="comment">// 替换一个字符</span></span><br><span class="line">                    dp[idx][j]=<span class="built_in">min</span>(dp[idx][j<span class="number">-1</span>],<span class="built_in">min</span>(dp[<span class="number">1</span>-idx][j],dp[<span class="number">1</span>-idx][j<span class="number">-1</span>]))<span class="number">+1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m%<span class="number">2</span>][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox14" checked="true"><label for="checkbox14"></label><a href="https://leetcode.cn/problems/2-keys-keyboard/">650. 只有两个键的键盘</a>（同过乘除计算位置）</p>
</li>
<li class="lvl-2">
<p>[ ]</p>
</li>
</ul>
<h1>6 区间DP</h1>
<h2 id="6-1-定义">6.1 定义</h2>
<p>区间类动态规划是线性动态规划的扩展，它在分阶段地划分问题时，与阶段中元素出现的顺序和由前一阶段的哪些元素合并而来有很大的关系。</p>
<p>令状态$f(i,j)$表示将下标位置$i$到$j$的所有元素合并能获得的价值的最大值，那么 $f(i,j)=\max{f(i,k)+f(k+1,j)+cost}$为将这两组元素合并起来的代价。</p>
<h2 id="6-2-性质">6.2 性质</h2>
<p>区间 DP 有以下特点：</p>
<p><strong>合并</strong>：即将两个或多个部分进行整合，当然也可以反过来；</p>
<p><strong>特征</strong>：能将问题分解为能两两合并的形式；</p>
<p><strong>求解</strong>：对整个问题设最优值，枚举合并点，将问题分解为左右两个部分，最后合并两个部分的最优值得到原问题的最优值。</p>
<h1>7 数位DP</h1>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> s:对上边界数字转为字符串</span></span><br><span class="line"><span class="comment"> i:当前填第i个数字</span></span><br><span class="line"><span class="comment"> mask: 标记已经填过了哪些数字（数字不可重复使用）</span></span><br><span class="line"><span class="comment"> isLimited：当前位置填入数字是否受到限制</span></span><br><span class="line"><span class="comment"> isNum：前面是否填过数字（数字是否可以从0开始）</span></span><br><span class="line"><span class="comment"> dp：记忆化搜索，记录已经查找过的结果，dp[i][j]表示前面[:i-1]的情况为j，第i位数字及其之后共有多少种选择</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//backtrack(s,i,mask,isLimited,isNum,dp)从左到右填第i位及其之后数位的合法方案数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">backtrack</span><span class="params">(s,i,mask,isLimited,isNum,dp)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==s.<span class="built_in">size</span>())</span><br><span class="line">        <span class="keyword">return</span> isNum;</span><br><span class="line">   	<span class="keyword">if</span>(!isLimited&amp;&amp;isNum&amp;&amp;dp[i][mask]&gt;=<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> dp[i][mask]</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!isNum)</span><br><span class="line">        res+=<span class="built_in">backtrack</span>(s,i<span class="number">+1</span>,mask,<span class="literal">false</span>,<span class="literal">false</span>,dp);</span><br><span class="line">   	</span><br><span class="line">    <span class="type">int</span> up=isLimited?s[i]-<span class="string">&#x27;0&#x27;</span>:<span class="number">9</span>;</span><br><span class="line">    <span class="comment">//前面已经填过数字，当前位置可以填0，否则填1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">1</span>-isNum;d&lt;=up;d++)&#123;</span><br><span class="line">        <span class="comment">//数字d未使用过</span></span><br><span class="line">        <span class="keyword">if</span>((mask&amp;(<span class="number">1</span>&lt;&lt;d))==<span class="number">0</span>)&#123;</span><br><span class="line">            res+=<span class="built_in">backtrack</span>(s,i<span class="number">+1</span>,mask|<span class="number">1</span>&lt;&lt;d,isLimited&amp;&amp;d==up,<span class="literal">true</span>,dp);</span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//缓存当前结果</span></span><br><span class="line">    <span class="keyword">if</span>(!isLimited&amp;&amp;isNum)</span><br><span class="line">        dp[i][mask]=res;</span><br><span class="line">   	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-1-1-题目">7.1.1 题目</h3>
<h4 id="7-1-1-1-6957-统计范围内的步进数字数目">7.1.1.1 <a href="https://leetcode.cn/problems/count-stepping-numbers-in-range/">6957. 统计范围内的步进数字数目</a></h4>
<blockquote>
<p><mark>取模相减结果为负数</mark></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> MOD=<span class="number">1e9</span><span class="number">+7</span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countSteppingNumbers</span><span class="params">(string low, string high)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m=low.<span class="built_in">size</span>(),n=high.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp1</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">10</span>,<span class="number">-1</span>)),<span class="built_in">dp2</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">10</span>,<span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> r=<span class="built_in">backtrack</span>(high,<span class="number">0</span>,<span class="literal">false</span>,<span class="literal">true</span>,dp1,<span class="number">-1</span>);</span><br><span class="line">        <span class="type">int</span> l=<span class="built_in">backtrack</span>(low,<span class="number">0</span>,<span class="literal">false</span>,<span class="literal">true</span>,dp2,<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ((r-l)+MOD+<span class="built_in">valid</span>(low))%MOD;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">valid</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> n=s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">abs</span>(s[i]-s[i<span class="number">-1</span>])!=<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">backtrack</span><span class="params">(string &amp;s,<span class="type">int</span> i,<span class="type">bool</span> isNum,<span class="type">bool</span> isLimit,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; dp,<span class="type">int</span> pre)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==s.<span class="built_in">size</span>())</span><br><span class="line">            <span class="keyword">return</span> isNum;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(!isLimit&amp;&amp;isNum&amp;&amp;dp[i][pre]!=<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">return</span> dp[i][pre];</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(!isNum)</span><br><span class="line">            res+=<span class="built_in">backtrack</span>(s,i<span class="number">+1</span>,<span class="literal">false</span>,<span class="literal">false</span>,dp,<span class="number">-1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> up=isLimit?s[i]-<span class="string">&#x27;0&#x27;</span>:<span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">1</span>-isNum;d&lt;=up;d++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pre==<span class="number">-1</span>||<span class="built_in">abs</span>(d-pre)==<span class="number">1</span>)</span><br><span class="line">                res=(res+<span class="built_in">backtrack</span>(s,i<span class="number">+1</span>,<span class="literal">true</span>,isLimit&amp;&amp;d==up,dp,d))%MOD;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(isNum&amp;&amp;!isLimit)</span><br><span class="line">            dp[i][pre]=res;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="7-1-1-2-2719-统计整数数目">7.1.1.2 <a href="https://leetcode.cn/problems/count-of-integers/">2719. 统计整数数目</a></h4>
<p><img src="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202306071723806.png" alt="DP"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution1</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> MOD = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(string num1, string num2, <span class="type">int</span> min_sum, <span class="type">int</span> max_sum)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> ans = (<span class="built_in">helper</span>(num2, min_sum, max_sum) + MOD -</span><br><span class="line">                   <span class="built_in">helper</span>(num1, min_sum, max_sum)) %</span><br><span class="line">                  MOD;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> &amp;ch : num1) &#123;</span><br><span class="line">            sum += ch - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans += sum &gt;= min_sum &amp;&amp; sum &lt;= max_sum;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 计算x&lt;=num，且min_sum&lt;=x&lt;=max_sum数字个数</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">helper</span><span class="params">(string &amp;num, <span class="type">int</span> &amp;min_sum, <span class="type">int</span> &amp;max_sum)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = num.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">// 编译器不支持变长数组声明</span></span><br><span class="line">        <span class="comment">// int memo[n][min(9 * n, max_sum) + 1];</span></span><br><span class="line">        <span class="comment">// memset(memo, -1, sizeof(memo));</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="built_in">min</span>(<span class="number">9</span> * n, max_sum) + <span class="number">1</span>, <span class="number">-1</span>));</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>, <span class="type">bool</span>)&gt; f = [&amp;](<span class="type">int</span> i, <span class="type">int</span> sum,</span><br><span class="line">                                              <span class="type">bool</span> isLimited) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (sum &gt; max_sum) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i == num.<span class="built_in">size</span>()) &#123;</span><br><span class="line">                <span class="keyword">return</span> sum &gt;= min_sum;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!isLimited &amp;&amp; memo[i][sum] != <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> memo[i][sum];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> up = isLimited ? num[i] - <span class="string">&#x27;0&#x27;</span> : <span class="number">9</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">0</span>; d &lt;= up; d++) &#123;</span><br><span class="line">                res = (res + <span class="built_in">f</span>(i + <span class="number">1</span>, sum + d, isLimited &amp;&amp; d == up)) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isLimited)</span><br><span class="line">                memo[i][sum] = res;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">int</span> res = <span class="built_in">f</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="7-1-1-3-600-不含连续1的非负整数">7.1.1.3 <a href="https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/">600. 不含连续1的非负整数</a></h4>
<blockquote>
<p>给定一个正整数 <code>n</code> ，请你统计在 <code>[0, n]</code> 范围的非负整数中，有多少个整数的二进制表示中不存在 <strong>连续的 1</strong> 。</p>
</blockquote>
<h5 id="7-1-1-3-1-方法一">7.1.1.3.1 方法一</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findIntegers</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> tmp=n,cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(tmp)&#123;</span><br><span class="line">            tmp=tmp/<span class="number">2</span>;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//cnt记录n的二进制表示有多少位</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(cnt<span class="number">-1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>,<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">backtrack</span>(n,cnt<span class="number">-1</span>,<span class="literal">true</span>,<span class="literal">false</span>,dp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">backtrack</span><span class="params">(<span class="type">int</span>&amp; n,<span class="type">int</span> i,<span class="type">bool</span> isLimited,<span class="type">bool</span> pre1, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; dp)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!isLimited&amp;&amp;dp[i][pre1]&gt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> dp[i][pre1];</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">// n&amp;(1&lt;&lt;i)</span></span><br><span class="line">        <span class="type">int</span> up=isLimited?(n&gt;&gt;i)&amp;<span class="number">1</span>:<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 当前位填0</span></span><br><span class="line">        res+=<span class="built_in">backtrack</span>(n,i<span class="number">-1</span>,isLimited&amp;&amp;up==<span class="number">0</span>,<span class="literal">false</span>,dp);</span><br><span class="line">        <span class="keyword">if</span>(!pre1&amp;&amp;up==<span class="number">1</span>)</span><br><span class="line">            res+=<span class="built_in">backtrack</span>(n,i<span class="number">-1</span>,isLimited&amp;&amp;up==<span class="number">1</span>,<span class="literal">true</span>,dp);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(!isLimited)</span><br><span class="line">            dp[i][pre1]=res;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="7-1-1-3-2-方法二">7.1.1.3.2 方法二</h5>
<p><img src="https://raw.githubusercontent.com/destiny0118/picgo/master/pic2023/202306072019253.png" alt="DP-600. 不含连续1的非负整数"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findIntegers</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// dp[i]表示根节点位0，高度为i的满二叉树中个数</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(<span class="number">31</span>)</span></span>;</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        dp[<span class="number">1</span>]=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;<span class="number">31</span>;i++)&#123;</span><br><span class="line">            dp[i]=dp[i<span class="number">-1</span>]+dp[i<span class="number">-2</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>,pre=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">29</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="comment">// 第i位为1，可以填0</span></span><br><span class="line">            <span class="keyword">if</span>((n&gt;&gt;i)&amp;<span class="number">1</span>)&#123;</span><br><span class="line">                res+=dp[i];</span><br><span class="line">                cout&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">                <span class="keyword">if</span>(pre==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pre=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                pre=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="7-1-1-4-233-数字-1-的个数">7.1.1.4 <a href="https://leetcode.cn/problems/number-of-digit-one/">233. 数字 1 的个数</a></h4>
<blockquote>
<p>cnt1要作为记忆化搜索参数原因：</p>
<p>dp(i,cnt1)：i位前面填了cnt1个1，i及其之后不受限时含有的数字1个数</p>
<p>dp(n,0)=1：当前数字为1时有1个1</p>
<p>dp(n,1)=11：当前数字至少会有一个1，11时有两个1</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countDigitOne</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        string s=<span class="built_in">to_string</span>(n);</span><br><span class="line">        <span class="type">int</span> m=s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m,<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">backtrack</span>(s,<span class="number">0</span>,<span class="literal">true</span>,<span class="number">0</span>,dp);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][cnt1]填i以及之后位置时，前面已经填了cnt1个1</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">backtrack</span><span class="params">(string &amp;s,<span class="type">int</span> i,<span class="type">bool</span> isLimited,<span class="type">int</span> cnt1,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; dp)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==s.<span class="built_in">size</span>())</span><br><span class="line">            <span class="keyword">return</span> cnt1;</span><br><span class="line">        <span class="keyword">if</span>(!isLimited&amp;&amp;dp[i][cnt1]&gt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> dp[i][cnt1];</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> up=isLimited?s[i]-<span class="string">&#x27;0&#x27;</span>:<span class="number">9</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">0</span>;d&lt;=up;d++)&#123;</span><br><span class="line">            res+=<span class="built_in">backtrack</span>(s,i<span class="number">+1</span>,isLimited&amp;&amp;d==up,cnt1+(d==<span class="number">1</span>),dp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!isLimited)</span><br><span class="line">            dp[i][cnt1]=res;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1>8 dp[i]表示从头到下标i的某一性质</h1>
<h4 id="8-1-1-1-剑指-Offer-46-把数字翻译成字符串">8.1.1.1 <a href="https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/">剑指 Offer 46. 把数字翻译成字符串</a></h4>
<h1>9 子序列</h1>
<ul class="lvl-0">
<li class="lvl-2">
<p>子序列+不考虑相邻元素：选或不选</p>
</li>
<li class="lvl-2">
<p>子序列+考虑相邻元素，枚举选哪个</p>
</li>
</ul>
<blockquote>
<p>定义dp数组,dp[i]表示到位置i为止的子序列的性质。</p>
<ul class="lvl-1">
<li class="lvl-2">必须以i结尾，需要遍历dp数组得到结果</li>
<li class="lvl-2">不必须以i结尾，dp数组的最后一位结果即为题目所求</li>
</ul>
</blockquote>
<h4 id="9-1-1-1-300-最长递增子序列">9.1.1.1 <a href="https://leetcode.cn/problems/longest-increasing-subsequence/">300. 最长递增子序列</a></h4>
<blockquote>
<p>给你一个整数数组 nums ，找到其中最长严格递增子序列的长度。</p>
<p>子序列 是由数组派生而来的序列，删除（或不删除）数组中的元素而不改变其余元素的顺序。例如，[3,6,2,7] 是数组 [0,3,1,6,2,2,7] 的子序列。</p>
</blockquote>
<p>求解上升子序列方法：</p>
<blockquote>
<p>动态规划</p>
<p>优化方法：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>单调栈+二分优化</p>
</li>
<li class="lvl-2">
<p>线段树、平衡树等数据结构优化</p>
</li>
</ul>
</blockquote>
<h5 id="9-1-1-1-1-DP">9.1.1.1.1 DP</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n,<span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="type">int</span> ans=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[j]&lt;nums[i])&#123;</span><br><span class="line">                    dp[i]=<span class="built_in">max</span>(dp[i],dp[j]<span class="number">+1</span>);</span><br><span class="line">                    ans=<span class="built_in">max</span>(ans,dp[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="9-1-1-1-2-贪心-二分查找">9.1.1.1.2 贪心+二分查找</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(stk.<span class="built_in">empty</span>()||num&gt;stk.<span class="built_in">back</span>())</span><br><span class="line">                stk.<span class="built_in">push_back</span>(num);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// 找到&gt;=num的第一个位置</span></span><br><span class="line">                <span class="type">int</span> left=<span class="number">0</span>,right=stk.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">                    <span class="type">int</span> mid=left+(right-left)/<span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span>(stk[mid]&lt;num)</span><br><span class="line">                        left=mid<span class="number">+1</span>;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        right=mid;</span><br><span class="line">                &#125;</span><br><span class="line">                stk[left]=num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stk.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">if</span>(stk.<span class="built_in">empty</span>()||num&gt;stk.<span class="built_in">back</span>())</span><br><span class="line">                stk.<span class="built_in">push_back</span>(num);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// 找到&gt;=num的第一个位置</span></span><br><span class="line">                <span class="keyword">auto</span> iter=<span class="built_in">lower_bound</span>(stk.<span class="built_in">begin</span>(),stk.<span class="built_in">end</span>(),num);</span><br><span class="line">                *iter=num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stk.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-1-2-376-摆动序列">9.1.1.2 <a href="https://leetcode.cn/problems/wiggle-subsequence/">376. 摆动序列</a></h4>
<p>$$<br>
dp[i][0]表示[0:i]范围内，以nums[i]为止，最后下降的序列长度\<br>
dp[i][1]表示[0:i]范围内，以nums[i]为止，最后上升的序列长度<br>
$$</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">wiggleMaxLength</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>,<span class="number">1</span>));</span><br><span class="line">        <span class="type">int</span> ans=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]-nums[j]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    dp[i][<span class="number">1</span>]=<span class="built_in">max</span>(dp[i][<span class="number">1</span>],dp[j][<span class="number">0</span>]<span class="number">+1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i]&lt;nums[j])&#123;</span><br><span class="line">                    dp[i][<span class="number">0</span>]=<span class="built_in">max</span>(dp[i][<span class="number">0</span>],dp[j][<span class="number">1</span>]<span class="number">+1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                ans=<span class="built_in">max</span>(ans,<span class="built_in">max</span>(dp[i][<span class="number">1</span>],dp[i][<span class="number">0</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>$$<br>
dp[i][0]表示[0:i]范围内，不一定以nums[i]结尾，最后下降的序列长度\<br>
dp[i][1]表示[0:i]范围内，不一定以nums[i]结尾，最后上升的序列长度<br>
$$</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">wiggleMaxLength</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>,<span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">//上升</span></span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;nums[i<span class="number">-1</span>])&#123;</span><br><span class="line">                dp[i][<span class="number">1</span>]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">1</span>],dp[i<span class="number">-1</span>][<span class="number">0</span>]<span class="number">+1</span>);</span><br><span class="line">                dp[i][<span class="number">0</span>]=dp[i<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i]&lt;nums[i<span class="number">-1</span>])&#123;</span><br><span class="line">                dp[i][<span class="number">1</span>]=dp[i<span class="number">-1</span>][<span class="number">1</span>];</span><br><span class="line">                dp[i][<span class="number">0</span>]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">0</span>],dp[i<span class="number">-1</span>][<span class="number">1</span>]<span class="number">+1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][<span class="number">0</span>]=dp[i<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">                dp[i][<span class="number">1</span>]=dp[i<span class="number">-1</span>][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(dp[n<span class="number">-1</span>][<span class="number">0</span>],dp[n<span class="number">-1</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>空间优化</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">wiggleMaxLength</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> up=<span class="number">1</span>,down=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;nums[i<span class="number">-1</span>])&#123;</span><br><span class="line">                up=<span class="built_in">max</span>(up,down<span class="number">+1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i]&lt;nums[i<span class="number">-1</span>])&#123;</span><br><span class="line">                down=<span class="built_in">max</span>(down,up<span class="number">+1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(up,down);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>贪心算法</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">wiggleMaxLength</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.<span class="built_in">size</span>() &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> sign = nums[<span class="number">0</span>] - nums[<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> count = sign != <span class="number">0</span> ? <span class="number">2</span> : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> cursign = nums[i - <span class="number">1</span>] - nums[i];</span><br><span class="line">        <span class="keyword">if</span> ((sign &gt;= <span class="number">0</span> &amp;&amp; cursign &lt; <span class="number">0</span>) || (sign &lt;= <span class="number">0</span> &amp;&amp; cursign &gt; <span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            sign = cursign;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="9-2-最大子段和">9.2 最大子段和</h2>
<p><a href="https://blog.csdn.net/weixin_40170902/article/details/80585218">最大子段和问题：蛮力、递归及动态规划</a></p>
<blockquote>
<p>Given a sequence a[1],a[2],a[3]…a[n], your job is to calculate the max sum of a sub-sequence. For example, given (6,-1,5,4,-7), the max sum in this sequence is 6 + (-1) + 5 + 4 = 14.</p>
</blockquote>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1003">Max Sum杭电</a></p>
<blockquote>
<p>主要思想：如果之前求和为正，则加上当前元素，同时每次记录当前最大值，</p>
<p>​					否则，前面求和为负，应从当前位置重新求和</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>错误位置，此处为正确写法</p>
<p><img src="https://gitee.com/destiny0118/picgo/raw/master/pic/image-20210409201244924.png" alt="image-20210409201244924"></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;HDU/max_sum.input&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="type">int</span> kase;</span><br><span class="line">    cin &gt;&gt; kase;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (kase--) &#123;</span><br><span class="line">        <span class="type">int</span> n; <span class="comment">//每一行数据数</span></span><br><span class="line">        <span class="type">int</span> max_sum, sum;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; sum;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; n &lt;&lt; endl;</span></span><br><span class="line">        max_sum = sum;</span><br><span class="line">        <span class="type">int</span> begin_pos = <span class="number">1</span>, end_pos = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> index = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> begin = <span class="number">1</span>, end = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> t;</span><br><span class="line">            index++;</span><br><span class="line">            cin &gt;&gt; t;</span><br><span class="line">            <span class="comment">//sum+t&gt;=t</span></span><br><span class="line">            <span class="keyword">if</span> (sum + t &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; &quot;sum: &quot; &lt;&lt; sum &lt;&lt; &quot;   t:&quot; &lt;&lt; t &lt;&lt; endl;</span></span><br><span class="line">                sum += t;</span><br><span class="line">                end_pos = index;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sum = t;</span><br><span class="line">                begin_pos = index;</span><br><span class="line">                <span class="comment">//begin_pos=end_pos=index;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (sum &gt; max_sum) &#123;</span><br><span class="line">                max_sum = sum;</span><br><span class="line">                begin = begin_pos;</span><br><span class="line">                end = end_pos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Case &quot;</span> &lt;&lt; cnt++ &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; max_sum &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; begin &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; end &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span> (kase)</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// system(&quot;pause&quot;);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-3-最大子矩阵和">9.3 最大子矩阵和</h2>
<blockquote>
<p>给定一个n*m的矩阵A，求A中的一个非空子矩阵，使这个子矩阵中的元素和最大。</p>
<p>其中，A的子矩阵指在A中行和列均连续的一块。</p>
<p><a href="https://blog.csdn.net/m0_38033475/article/details/79179338">链接</a></p>
<p>思想：将二维压缩到一维</p>
</blockquote>
  <figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_N 502</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *给定一个n*m的矩阵A，求A中的一个非空子矩阵，使这个子矩阵中的元素和最大。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> data[MAX_N][MAX_N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;HDU/input/max_matrix.input&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin);</span><br><span class="line">    <span class="type">int</span> n, m; <span class="comment">// n行，m列</span></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; data[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> max_result = data[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> column[MAX_N], dp[MAX_N] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="comment">// memset(dp, 0, sizeof(int) * MAX_N);</span></span><br><span class="line">    <span class="comment">//从i行到j行压缩到column[k]中</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(column, <span class="number">0</span>, <span class="built_in">sizeof</span>(<span class="type">int</span>) * MAX_N);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="comment">//对列的遍历</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= m; ++k) &#123;</span><br><span class="line">                column[k] += data[j][k];</span><br><span class="line">                <span class="keyword">if</span> (dp[k - <span class="number">1</span>] &gt; <span class="number">0</span>)</span><br><span class="line">                    dp[k] = dp[k - <span class="number">1</span>] + column[k];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[k] = column[k];</span><br><span class="line">                max_result = <span class="built_in">max</span>(max_result, dp[k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; max_result &lt;&lt; endl;    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>10 分割类DP</h1>
<blockquote>
<p>对于分割类型题，动态规划的状态转移方程通常并不依赖相邻的位置，而是依赖于满足分割条件的位置。</p>
</blockquote>
<h4 id="10-1-1-1-139-单词拆分">10.1.1.1 <a href="https://leetcode.cn/problems/word-break/">139. 单词拆分</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">wordBreak</span><span class="params">(string s, vector&lt;string&gt;&amp; wordDict)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">unordered_set&lt;string&gt; <span class="title">record</span><span class="params">(wordDict.begin(),wordDict.end())</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">                <span class="comment">// 取字符[j:i]，找到一个可以分割的位置便可以返回</span></span><br><span class="line">                string tmp=s.<span class="built_in">substr</span>(j,i-j<span class="number">+1</span>);</span><br><span class="line">                <span class="keyword">if</span>(record.<span class="built_in">count</span>(tmp)&amp;&amp;dp[j])&#123;</span><br><span class="line">                    dp[i<span class="number">+1</span>]=<span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="10-1-1-2-140-单词拆分-II">10.1.1.2 <a href="https://leetcode.cn/problems/word-break-ii/">140. 单词拆分 II</a></h4>
<h4 id="10-1-1-3-279-完全平方数">10.1.1.3 <a href="https://leetcode.cn/problems/perfect-squares/">279. 完全平方数</a></h4>
<h1>11 股票交易类</h1>
<h4 id="11-1-1-1-123-买卖股票的最佳时机-III">11.1.1.1 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/">123. 买卖股票的最佳时机 III</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buy</span><span class="params">(<span class="number">3</span>,INT_MIN)</span>,<span class="title">sell</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">2</span>;j++)&#123;</span><br><span class="line">                buy[j]=<span class="built_in">max</span>(buy[j],sell[j<span class="number">-1</span>]-prices[i<span class="number">-1</span>]);</span><br><span class="line">                sell[j]=<span class="built_in">max</span>(sell[j],buy[j]+prices[i<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">          </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul class="lvl-1">
<li class="lvl-2">
<p>只进行过一次买操作；</p>
</li>
<li class="lvl-2">
<p>进行了一次买操作和一次卖操作，即完成了一笔交易；</p>
</li>
<li class="lvl-2">
<p>在完成了一笔交易的前提下，进行了第二次买操作；</p>
</li>
<li class="lvl-2">
<p>完成了全部两笔交易。</p>
</li>
</ul>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> buy1 = -prices[<span class="number">0</span>], sell1 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> buy2 = -prices[<span class="number">0</span>], sell2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            buy1 = <span class="built_in">max</span>(buy1, -prices[i]);</span><br><span class="line">            sell1 = <span class="built_in">max</span>(sell1, buy1 + prices[i]);</span><br><span class="line">            buy2 = <span class="built_in">max</span>(buy2, sell1 - prices[i]);</span><br><span class="line">            sell2 = <span class="built_in">max</span>(sell2, buy2 + prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>分部讨论，fl[i]表示[0:i]进行股票交易可获得最大收益</p>
<p>fr[i]表示[i:]进行股票交易可获得最大收益</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fl</span><span class="params">(n)</span>,<span class="title">fr</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="type">int</span> mn=prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            fl[i]=<span class="built_in">max</span>(fl[i<span class="number">-1</span>],prices[i]-mn);</span><br><span class="line">            mn=<span class="built_in">min</span>(mn,prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> mx=prices[n<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=n<span class="number">-2</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            fr[i]=<span class="built_in">max</span>(fr[i<span class="number">+1</span>],mx-prices[i]);</span><br><span class="line">            mx=<span class="built_in">max</span>(prices[i],mx);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            ret=<span class="built_in">max</span>(ret,fl[i]+fr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="11-1-1-2-188-买卖股票的最佳时机-IV">11.1.1.2 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/">188. 买卖股票的最佳时机 IV</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buy</span><span class="params">(k<span class="number">+1</span>,INT_MIN)</span>,<span class="title">sell</span><span class="params">(k<span class="number">+1</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)&#123;</span><br><span class="line">                buy[j]=<span class="built_in">max</span>(buy[j],sell[j<span class="number">-1</span>]-prices[i<span class="number">-1</span>]);</span><br><span class="line">                sell[j]=<span class="built_in">max</span>(sell[j],buy[j]+prices[i<span class="number">-1</span>]);</span><br><span class="line">                <span class="comment">// cout&lt;&lt;j&lt;&lt;&quot; &quot;&lt;&lt;sell[j]&lt;&lt;endl;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[k];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="11-1-1-3-309-最佳买卖股票时机含冷冻期">11.1.1.3 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. 最佳买卖股票时机含冷冻期</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buy</span><span class="params">(n<span class="number">+1</span>,INT_MIN)</span>,<span class="title">sell</span><span class="params">(n<span class="number">+1</span>)</span></span>;</span><br><span class="line">        buy[<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            buy[i]=<span class="built_in">max</span>(buy[i<span class="number">-1</span>],sell[i<span class="number">-2</span>]-prices[i<span class="number">-1</span>]);</span><br><span class="line">            sell[i]=<span class="built_in">max</span>(sell[i<span class="number">-1</span>],buy[i]+prices[i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>,<span class="number">0</span>));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">//dp[i][0]表示第i天没有股票</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            dp[i][<span class="number">0</span>]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">0</span>],dp[i<span class="number">-1</span>][<span class="number">1</span>]+prices[i]);</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">1</span>)</span><br><span class="line">                dp[i][<span class="number">1</span>]=<span class="built_in">max</span>(dp[<span class="number">0</span>][<span class="number">1</span>],-prices[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i][<span class="number">1</span>]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][<span class="number">1</span>],dp[i<span class="number">-2</span>][<span class="number">0</span>]-prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="11-1-1-4-714-买卖股票的最佳时机含手续费">11.1.1.4 <a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. 买卖股票的最佳时机含手续费</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices, <span class="type">int</span> fee)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buy</span><span class="params">(n,INT_MIN)</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sell</span><span class="params">(n)</span></span>;</span><br><span class="line"></span><br><span class="line">        buy[<span class="number">0</span>]=-prices[<span class="number">0</span>]-fee;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">// 第i天是否买入股票</span></span><br><span class="line">            buy[i]=<span class="built_in">max</span>(buy[i<span class="number">-1</span>],sell[i<span class="number">-1</span>]-prices[i]-fee);</span><br><span class="line">            sell[i]=<span class="built_in">max</span>(sell[i<span class="number">-1</span>],buy[i]+prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices, <span class="type">int</span> fee)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> buy=-prices[<span class="number">0</span>]-fee;</span><br><span class="line">        <span class="type">int</span> sell=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">// 第i天是否买入股票</span></span><br><span class="line">            buy=<span class="built_in">max</span>(buy,sell-prices[i]-fee);</span><br><span class="line">            sell=<span class="built_in">max</span>(sell,buy+prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;prices, <span class="type">int</span> fee)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buy</span><span class="params">(n, INT_MIN)</span>, <span class="title">sell</span><span class="params">(n, INT_MIN)</span></span>;</span><br><span class="line">        buy[<span class="number">0</span>] = -prices[<span class="number">0</span>] - fee;</span><br><span class="line">        sell[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">		</span><br><span class="line">        <span class="comment">//以第i天结尾的最大收益，到第i天的最大收益</span></span><br><span class="line">        <span class="comment">// int ans = 0;</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; n; i++) &#123;</span></span><br><span class="line">        <span class="comment">//     for (int j = 0; j &lt; i; j++) &#123;</span></span><br><span class="line">        <span class="comment">//         buy[i] = max(buy[i], sell[j] - prices[i] - fee);</span></span><br><span class="line">        <span class="comment">//         sell[i] = max(sell[i], buy[j] + prices[i]);</span></span><br><span class="line">        <span class="comment">//         ans = max(ans, sell[i]);</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            buy[i] = <span class="built_in">max</span>(buy[i - <span class="number">1</span>], sell[i - <span class="number">1</span>] - prices[i] - fee);</span><br><span class="line">            sell[i] = <span class="built_in">max</span>(sell[i - <span class="number">1</span>], buy[i - <span class="number">1</span>] + prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox15"><label for="checkbox15">#### </label><a href="https://leetcode.cn/problems/maximum-alternating-subsequence-sum/">1911. 最大子序列交替和</a></p>
</li>
</ul>
<h1>12 奇偶DP</h1>
<h4 id="12-1-1-1-2786-访问数组中的位置使分数最大">12.1.1.1 <a href="https://leetcode.cn/problems/visit-array-positions-to-maximize-score/">2786. 访问数组中的位置使分数最大</a></h4>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">maxScore</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">dp</span><span class="params">(n)</span></span>;</span><br><span class="line">        dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] % <span class="number">2</span> == nums[j] % <span class="number">2</span>)</span><br><span class="line">                    dp[i] = <span class="built_in">max</span>(dp[i], dp[j] + nums[i]);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i] = <span class="built_in">max</span>(dp[i], dp[j] + nums[i] - x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> *<span class="built_in">max_element</span>(dp.<span class="built_in">begin</span>(), dp.<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">maxScore</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">dp</span><span class="params">(n,LLONG_MIN)</span></span>;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; mark=&#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">        dp[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line">        mark[nums[<span class="number">0</span>]%<span class="number">2</span>]=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> ans=nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="type">int</span> num=nums[i];</span><br><span class="line">            <span class="keyword">if</span>(mark[<span class="number">0</span>]!=<span class="number">-1</span>)</span><br><span class="line">                dp[i]=<span class="built_in">max</span>(dp[i],dp[mark[<span class="number">0</span>]]+nums[i]-(num%<span class="number">2</span>==<span class="number">0</span>?<span class="number">0</span>:x));</span><br><span class="line">            <span class="keyword">if</span>(mark[<span class="number">1</span>]!=<span class="number">-1</span>)</span><br><span class="line">                dp[i]=<span class="built_in">max</span>(dp[i],dp[mark[<span class="number">1</span>]]+nums[i]-(num%<span class="number">2</span>==<span class="number">1</span>?<span class="number">0</span>:x));</span><br><span class="line">            mark[num%<span class="number">2</span>]=i;</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不能将odd和even初始化为0，因为nums[0]是初始状态</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">maxScore</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n=nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> odd=INT_MIN,even=INT_MIN;</span><br><span class="line">        <span class="keyword">if</span>(nums[<span class="number">0</span>]%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">            even=nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            odd=nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                even=<span class="built_in">max</span>(odd+nums[i]-x,even+nums[i]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                odd=<span class="built_in">max</span>(odd+nums[i],even+nums[i]-x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(odd,even);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">maxScore</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化 f[a_0 % 2]</span></span><br><span class="line">        <span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">1e18</span>;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> f[<span class="number">2</span>];</span><br><span class="line">        f[<span class="number">0</span>] = f[<span class="number">1</span>] = -INF;</span><br><span class="line">        f[nums[<span class="number">0</span>] % <span class="number">2</span>] = nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 从左到右枚举访问的终点</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> ans = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// 套用 dp 方程</span></span><br><span class="line">            <span class="type">int</span> p = nums[i] % <span class="number">2</span>;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> t = <span class="built_in">max</span>(f[p] + nums[i], f[p ^ <span class="number">1</span>] + nums[i] - x);</span><br><span class="line">            f[p] = <span class="built_in">max</span>(f[p], t);</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1>13 题目</h1>
<ul class="lvl-0">
<li class="lvl-2">
<p><input type="checkbox" id="checkbox16" checked="true"><label for="checkbox16">#### </label><a href="https://leetcode.cn/problems/house-robber/">198. 打家劫舍</a></p>
</li>
<li class="lvl-2">
<p><input type="checkbox" id="checkbox17" checked="true"><label for="checkbox17">#### </label><a href="https://leetcode.cn/problems/house-robber-ii/">213. 打家劫舍 II</a>（环形数组，考虑首尾连接情况）</p>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" rel="tag"># 动态规划</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/02/28/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95/" rel="prev" title="字符串相关算法">
                  <i class="fa fa-chevron-left"></i> 字符串相关算法
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/02/28/%E7%AE%97%E6%B3%95/%E5%8C%BA%E9%97%B4%EF%BC%9A%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84(Binary-Indexed-Tree,-BIT)/" rel="next" title="树状数组(Binary Indexed Tree, BIT)">
                  树状数组(Binary Indexed Tree, BIT) <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Destiny</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.1/es5/tex-mml-chtml.js","integrity":"sha256-hlC2uSQYTmPsrzGZTEQEg9PZ1a/+SV6VBCTclohf2og="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
